# PairFinance - 共同生活向けスマート家計簿アプリ (PoC)

https://sharebudget-d2faf.web.app/

## 概要

最先端のAI技術とリアルタイムデータベースを活用して、カップルやルームシェアなどの共同生活における「お金の管理」と「精算」の煩わしさを解消する概念実証（PoC）アプリケーションです。
レシートを撮影するだけでAIが内容を自動入力し、誰がいくら払ったかをクラウドでリアルタイムに共有。複雑になりがちな毎月の精算も、ワンタップで最適な支払い額を算出します。

> **Note**: 本アプリケーションは現在PWA対応のWebアプリとして稼働中のPoC（概念実証）です。

---

## ギャラリー

### 📱 メインダッシュボード
現在の支出合計、予算の消化状況、誰がいくら多く払っているかが一目でわかる直感的なデザイン。

### 🧾 AIレシートスキャン
Google Gemini AIを活用し、レシート画像を瞬時に解析。日付、金額、カテゴリ、店名を高精度に自動抽出します。

### 💰 スマート精算システム
「今月はどちらがいくら相手に支払うべきか」を自動計算。過去の未精算や繰越金も含めた柔軟な精算が可能です。

---

## 使用場面

| 場面 | 活用内容 |
|------|----------|
| **日々の買い物** | レシートを撮影してアップロードするだけで、共有の家計簿に即時反映 |
| **毎月の精算** | 月末に電卓を叩くことなく、「精算する」ボタン一つで貸し借りを確定 |
| **固定費管理** | 家賃や光熱費など、毎月・特定の人が払う費用を自動で計上 |
| **将来の計画** | 旅行や家具の購入など、将来の大きな出費をメモして予算建て |

---

## 主な機能

### 1. Gemini AI レシート解析
- **自動入力**: レシート画像をアップロードすると、Google Gemini 2.5 Flashモデルが画像を解析し、主要な情報を構造化データとして抽出。
- **高精度**: 日本語のレシート特有のフォーマットにも対応し、カテゴリ分類も推論します。

### 2. リアルタイム共有 & PWA
- **即時同期**: パートナーが入力したデータは瞬時に自分の画面にも反映されます。
- **アプリ感覚**: PWA（Progressive Web App）に対応しており、スマホのホーム画面に追加してネイティブアプリのように使用可能。

### 3. 高度な精算ロジック
- **自動計算**: 2人の支払いバランスを常に計算し、精算時に必要な移動金額を提示。
- **過去データの管理**: 先月分の未精算がある場合のアラート表示や、スワイプ操作での過去月へのアクセス機能も搭載。

### 4. 視覚的なレポート
- **カテゴリ別分析**: 円グラフで何にお金を使っているかを可視化（今月/全期間）。
- **推移グラフ**: 棒グラフと折れ線グラフを切り替え可能で、季節ごとの支出変動などを分析できます。

---

## アプリケーション構造

```
pairfinance/
├── src/
│   ├── App.tsx                    # メインルーティング・認証状態管理
│   ├── services/
│   │   ├── geminiService.ts       # Gemini API連携（画像解析）
│   │   ├── storageService.ts      # Firestore連携（CRUD操作・精算ロジック）
│   │   └── firebase.ts            # Firebase初期化設定
│   ├── components/
│   │   ├── Dashboard.tsx          # ホーム画面（サマリー表示）
│   │   ├── AddExpense.tsx         # 支出入力・カメラ/レシート機能
│   │   ├── Settlement.tsx         # 精算計算・履歴管理
│   │   ├── Reports.tsx            # グラフによる分析
│   │   ├── FixedCosts.tsx         # 固定費設定
│   │   └── Auth.tsx               # 認証・世帯管理画面
│   └── types.ts                   # 型定義
└── ...
```

---

## 技術スタック

- **Frontend**: React, TypeScript, Vite
- **UI Framework**: Tailwind CSS, Lucide React (Icons), Recharts (Charts)
- **Backend (BaaS)**: Firebase (Authentication, Firestore, Hosting)
- **AI Model**: Google Gemini 2.5 Flash (via Google GenAI SDK)
- **Mobile**: PWA (Vite PWA Plugin) - オフライン対応、ホーム画面追加可能

---

## セキュリティ対策

- **Firestore Rules**: ユーザー認証と世帯メンバーシップに基づく厳格なデータアクセス制御
- **Input Validation**: 金額上限、文字数制限、XSS対策などの徹底的なバリデーション
- **Secure Handling**: APIキーの環境変数管理、セッションベースの認証管理

---

## 今後の展望 (Roadmap)

- **予算設定機能**: カテゴリごとの予算上限設定とアラート通知
- **レシート詳細編集**: AI解析結果のより詳細な手動修正UI
- **複数世帯対応**: 複数のグループ（例：家族用、ルームシェア用）の切り替え機能
